<div class="min-h-screen bg-gray-100">
  <!-- Navbar -->
  <nav class="bg-white shadow">
    <div class="max-w-6xl mx-auto flex justify-between items-center px-5 py-5">
      <h2 class="text-2xl font-semibold text-gray-800">Dashboard</h2>
      <div class="flex items-center gap-5">
        <span class="text-gray-600 font-medium">{{ userName }}</span>
        <button
          (click)="logout()"
          class="px-5 py-2 bg-indigo-500 text-white rounded-md font-medium hover:bg-indigo-600 transition"
        >
          Logout
        </button>
      </div>
    </div>
  </nav>

  <!-- Dashboard Content -->
  <div class="max-w-6xl mx-auto px-5 py-10">
    <div class="mb-10">
      <h1 class="text-3xl font-bold text-gray-800 mb-2">
        Welcome back, {{ userName }}!
      </h1>
      <p class="text-gray-500">{{ userEmail }}</p>
    </div>

    <div class="grid gap-5 sm:grid-cols-2 lg:grid-cols-3 mb-10">
      <div
        class="bg-white p-8 rounded-xl shadow hover:shadow-lg transition hover:-translate-y-1"
      >
        <div
          class="w-12 h-12 rounded-lg flex items-center justify-center text-2xl mb-4 text-white"
          style="background-color: #667eea"
        >
          üìä
        </div>
        <h3 class="text-sm font-medium text-gray-600 uppercase mb-1">
          Total Projects
        </h3>
        <p class="text-3xl font-bold text-gray-800">12</p>
      </div>

      <div
        class="bg-white p-8 rounded-xl shadow hover:shadow-lg transition hover:-translate-y-1"
      >
        <div
          class="w-12 h-12 rounded-lg flex items-center justify-center text-2xl mb-4 text-white"
          style="background-color: #48bb78"
        >
          ‚úì
        </div>
        <h3 class="text-sm font-medium text-gray-600 uppercase mb-1">
          Completed Tasks
        </h3>
        <p class="text-3xl font-bold text-gray-800">48</p>
      </div>

      <div
        class="bg-white p-8 rounded-xl shadow hover:shadow-lg transition hover:-translate-y-1"
      >
        <div
          class="w-12 h-12 rounded-lg flex items-center justify-center text-2xl mb-4 text-white"
          style="background-color: #ed8936"
        >
          ‚è∞
        </div>
        <h3 class="text-sm font-medium text-gray-600 uppercase mb-1">
          Pending Tasks
        </h3>
        <p class="text-3xl font-bold text-gray-800">15</p>
      </div>
    </div>

    <!-- Add Task Form -->
    <div class="bg-white p-8 rounded-xl shadow mb-10">
      <h2 class="text-xl font-semibold text-gray-800 mb-6">Add New Task</h2>

      <form (ngSubmit)="addTask()" #taskForm="ngForm" class="space-y-5">
        <div>
          <label class="block text-gray-700 font-medium mb-2">Task Title</label>
          <input
            type="text"
            name="title"
            [(ngModel)]="newTask.title"
            placeholder="Enter task title"
            required
            class="w-full px-4 py-3 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition"
          />
        </div>

        <div>
          <label class="block text-gray-700 font-medium mb-2"
            >Description</label
          >
          <textarea
            name="description"
            [(ngModel)]="newTask.description"
            rows="4"
            placeholder="Enter task description"
            class="w-full px-4 py-3 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition resize-none"
          ></textarea>
        </div>

        <button
          type="submit"
          [disabled]="taskForm.invalid"
          class="px-6 py-3 bg-indigo-500 text-white rounded-md font-medium hover:bg-indigo-600 transition disabled:opacity-50 disabled:cursor-not-allowed"
        >
          Add Task
        </button>
      </form>
    </div>

    <!-- Recent Activity -->
    <div class="bg-white p-8 rounded-xl shadow">
      <h2 class="text-xl font-semibold text-gray-800 mb-6">Recent Activity</h2>

      <div
        *ngIf="activities.length; else noActivity"
        class="flex flex-col gap-6"
      >
        <div
          *ngFor="let activity of activities"
          class="flex gap-4 border-b border-gray-200 pb-5 last:border-b-0 last:pb-0 items-start"
        >
          <div
            class="w-3 h-3 rounded-full mt-1.5"
            [ngClass]="activity.completed ? 'bg-green-500' : 'bg-indigo-500'"
          ></div>

          <div class="flex justify-between items-start w-full">
            <div>
              <h4
                class="text-lg font-medium mb-1"
                [ngClass]="activity.completed ? 'text-gray-400 line-through' : 'text-gray-800'"
              >
                {{ activity.title }}
              </h4>
              <p
                class="text-gray-500 mb-1"
                [ngClass]="activity.completed ? 'line-through text-gray-400' : ''"
              >
                {{ activity.description }}
              </p>
              <span class="text-xs text-gray-400 block mb-2">
                {{ getTimeAgo(activity.createdAt) }}
              </span>
            </div>
            <div>
              <button
                *ngIf="!activity.completed"
                (click)="markAsCompleted(activity)"
                class="px-3 py-1 bg-green-500 text-white text-sm rounded hover:bg-green-600 transition"
              >
                Mark as Completed
              </button>
              <span
                *ngIf="activity.completed"
                class="text-green-600 text-sm font-medium"
                >‚úÖ Completed</span
              >
            </div>
          </div>
        </div>
      </div>

      <ng-template #noActivity>
        <p class="text-gray-400 text-sm">No recent activity yet.</p>
      </ng-template>
    </div>
  </div>
</div>
